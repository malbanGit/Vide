<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="style.css" type="text/css"></link>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="date" content="20181124222015" />
<!-- created with HelpSetMaker, ID=364f1577 -->
<title>Raster images</title>
</head>
<body class="doc">
<h1>Raster images</h1>

<p>Raster image conversion and display code is generated in vedi, using the popup on the project file tree. By chosing the entry "convert image to vectrex raster" the dialog for image conversion is displayed. (see also the vedi&rarr;Raster images documentation)</p>

<p>The popup menu is only activated while an image file is selected in the current project. You have to download or create image files befor you can convert them. If you have a file available, you can easily add the file to your project. Place the mousecursor over the project name and press the right mouse button.</p>
<br/><p align="center">
<img src="pics/RasterCodeGen0.png" width="207" height="186" /><br/>
<em>add a file to the project</em></p><br/>

<p>Chose "add file"... and navigate in the resulting file choser to the image file of your desire.</p>
<br/><p align="center">
<img src="pics/RasterCodeGen1.png" width="505" height="358" /><br/>
<em>add an image file</em></p><br/>

<p>By chosing a file - the file is <i>copied</i> to the project directory and is NOW available.</p>
<br/><p align="center">
<img src="pics/RasterCodeGen2.png" width="269" height="352" /><br/>
<em>convert image to vectrex raster</em></p><br/>

<p>Selecting "convert image to vectrex raster" opens the - dialog:  (which is explained in "Raster images")</p>
<br/><p align="center">
<img src="pics/RasterCodeGen6.png" width="716" height="648" /><br/>
<em>convert image dialog</em></p><br/>

<p>Exiting the above dialog with "create" will (...hm...) create sources in the current project directory. <br />
(The name of the generated sources are derived from the chosen file. In the following it is assumed that the name given is <tt>"ghost.png"</tt>.) <br />
The generated sources are accompanied by an example raster display program. The example routine is programmed for bi directional raster data, if you want to use the provided routines - be sure that the corresponding checkbox is checked.</p>

<p><b>Note:<br />
</b> You can chose whether you want to generate uni- or bi- directional data (and examples).
<ul><li>
<p>bi directional data will be drawn:<br />

<ol><li>
<p>positioning of the beam</p>
</li><li>
<p>draw one line forward</p>
</li><li>
<p>draw one line backward</p>
</li><li>
<p>do 2) and 3) till finished This is in comparisson quite fast, but the result is prone to be "italic" due to vectrex drift</p>
</li></ol>
</p>
</li><li>
<p>uni directional data will be drawn:<br />

<ol><li>
<p>zeroing and positioning of the beam</p>
</li><li>
<p>draw line forward</p>
</li><li>
<p>do 1) and 2) till finished This is in comparisson quite slow (nearly double time as bi), but the result very "clear" and is immune to drift</p>
</li></ol>
</p>
</li></ul>
</p>

<p>Following sources are generated:
<ul><li>
<p><tt>rasterDraw.asm</tt><br />
the subroutines to display a raster "image"</p>
</li><li>
<p><tt>VECTREX.I</tt> <br />
which is needed by the source</p>
</li><li>
<p><tt>ghost.asm</tt><br />
a file with the actual image data </p>
</li><li>
<p><tt>ghostMain.asm</tt><br />
a "main" file, with an example vectrex runnable "cartridge" file</p>
</li></ul>
</p>

<p>A vectrex playable binary file can be generated by setting the generate ghostMain.asm file as the main file in the project.</p>
<br/><p align="center">
<img src="pics/RasterCodeGen3.png" width="327" height="390" /><br/>
<em>set example main</em></p><br/>

<p>The format and the actual display routines are documented in the source code. Just a few bullet points...
<ul><li>
<p>the actual display routine is called <tt> draw_raster_image </tt> and expects a pointer to the image data in register U</p>
</li><li>
<p>as with BIOS raster routines (printStr), the size of the image can be set with BIOS RAM locations:<br />
<tt> Vec_Text_Height </tt> and <tt> Vec_Text_Width </tt></p>
</li><li>
<p>in the example these are filled with defined constants (see top of main file): WIDTH and HEIGHT</p>
</li><li>
<p>the raster display example routines kept in the file <tt>rasterDraw.asm</tt> were put together in a few "minutes", and can probably be optimized. Just keep in mind, that the actual update of the ShiftReg should be done in 18 cycles (less - skips data and VIA can stall on certain cycle counts, more - are "a waste of time"...)</p>
</li></ul>
</p>
<br/><p align="center">
<img src="pics/RasterCodeGen4.png" width="855" height="874" /><br/>
<em>example main</em></p><br/>

<p>The actual generated raster data is kept in the file <tt>ghost.asm</tt> :</p>
<br/><p align="center">
<img src="pics/RasterCodeGen5.png" width="1090" height="939" /><br/>
<em>ghost.asm</em></p><br/>
<br/><p align="center">
<img src="pics/RasterCodeGen7.png" width="341" height="393" /><br/>
<em>example raster display</em></p><br/>
</body>
</html>
