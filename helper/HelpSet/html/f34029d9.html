<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="style.css" type="text/css"></link>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="date" content="20181124222015" />
<!-- created with HelpSetMaker, ID=f34029d9 -->
<title>AYFX sound effects</title>
</head>
<body class="doc">
<h1>AYFX sound effects</h1>

<p>AYFX file conversion and play code is generated in vedi, using the popup on the project file tree. By chosing the entry "build vectrex ayfx" the dialog is displayed (see also the vedi&rarr;AYFX-Conversion documentation).</p>

<p>The popup menu is only activated while a ayfx file is selected in the current project. You have to download (or create) files befor you can convert them (in the configuration section under edit you can download a few hundred [wait a little for the download to finish]).</p>

<p>If you have a file available, you can easily add the file to your project. Place the mousecursor over the project name and press the right mouse button.</p>
<br/><p align="center">
<img src="pics/AYFXCodeGen0.png" width="231" height="158" /><br/>
<em>add a file to the project</em></p><br/>

<p>Chose "add file"... and navigate in the resulting file choser to the file of your desire.</p>
<br/><p align="center">
<img src="pics/AYFXCodeGen1.png" width="510" height="357" /><br/>
<em>add a ayfx file</em></p><br/>

<p>By chosing a file - the file is <i>copied</i> to the project directory and is NOW available.</p>
<br/><p align="center">
<img src="pics/AYFXCodeGen2.png" width="297" height="294" /><br/>
<em>build vectrex ayfx</em></p><br/>

<p>Selecting "build vectrex ayfx" converts the ayfx files directly (no dialog, although you <i>can</i> edit ayfx files, for this you must use the ym-dialog): </p>

<p>The sources will be created in the current project directory. <br />
(The name of the generated sources are derived from the chosen file. In the following it is assumed that the name given is <tt>"metalgear&nbsp;1.afx"</tt>.) <br />
The generated sources are accompanied by an example ayfx player routine. </p>

<p>Following sources are generated:
<ul><li>
<p><tt>ayfxPlayer.i</tt><br />
the subroutines to play ym-data</p>
</li><li>
<p><tt>VECTREX.I</tt> <br />
which is needed by the source</p>
</li><li>
<p><tt>metalgear&nbsp;1.asm</tt><br />
a file with the actual data </p>
</li><li>
<p><tt>metalgear&nbsp;1Main.asm</tt><br />
a "main" file, with an example vectrex runnable "cartridge" file</p>
</li></ul>
</p>

<p>A vectrex playable binary file can be generated by setting the generate "metalgear&nbsp;1Main.asm" file as the main file in the project.</p>

<p><b>Notice:<br />
</b> When generating from a "C" project - the generated data is "C"-data!</p>
<br/><p align="center">
<img src="pics/AYFXCodeGen3.png" width="356" height="383" /><br/>
<em>ayfx</em></p><br/>

<p>The actual play routines are documented in the source code, for the format of ayfx files look at the documentation of the AYFX editor (downloadable at: <a target="_blank" href="https://shiru.untergrund.net/software.shtml">https://shiru.untergrund.net/software.shtml</a>). You can also use the ym-conversion dialog in vedi to edit/create/extract ayfx files.</p>

<p>Just a few bullet points...
<ul><li>
<p>the AYFX routines were written by <i>Richard Chadd</i>, I have not modified them, they were released as a facebook posting for other vectrex interested people</p>
</li><li>
<p>for initialization following variables should be cleared: <tt> sfx_pointer </tt>(16 bit) and <tt> sfx_status </tt>(8 bit).</p>
</li><li>
<p>for playing a sound effect the address of the effect must be put into the <tt> sfx_pointer </tt> variable and a "1" into the <tt> sfx_status </tt> variable</p>
</li><li>
<p>in the main loop a subroutine <tt> sfx_doframe </tt> must be called, as long as the status is not 0</p>
</li><li>
<p>the provided example does only play one ayfx at a time and this hardcoded in channel 3 of the PSG chip</p>
</li><li>
<p>to use the other two sound registers, the routine has to be expanded</p>
</li></ul>
</p>
<br/><p align="center">
<img src="pics/AYFXCodeGen4.png" width="816" height="702" /><br/>
<em>example main</em></p><br/>
<br/><p align="center">
<img src="pics/AYFXCodeGen5.png" width="519" height="113" /><br/>
<em>ayfx data</em></p><br/>
<br/><p align="center">
<img src="pics/AYFXCodeGen6.png" width="396" height="504" /><br/>
<em>ayfx example</em></p><br/>
</body>
</html>
