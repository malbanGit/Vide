<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="style.css" type="text/css"></link>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="date" content="20181124222015" />
<!-- created with HelpSetMaker, ID=990ba6a9 -->
<title>Mod-Files</title>
</head>
<body class="doc">
<h1>Mod-Files</h1>

<p>Mod conversion and playing code is generated in vedi, using the popup on the project file tree. By chosing the entry "build vectrex mod" the dialog for mod generation is displayed. (see also the vedi&rarr;Mod-Conversion documentation)</p>

<p>The popup menu is only activated while a mod file is selected in the current project. You have to download or create mod files befor you can convert them. If you have a mod file available (e.g. in the following example in the codelib directory&rarr;lineart), you can easily add the file to your project. Place the mousecursor over the project name and press the right mouse button.</p>
<br/><p align="center">
<img src="pics/ModCodeGen0.png" width="240" height="220" /><br/>
<em>add a file to the project</em></p><br/>

<p>Chose "add file"... and navigate in the resulting file choser to the mod file of your desire.</p>
<br/><p align="center">
<img src="pics/ModCodeGen1.png" width="537" height="469" /><br/>
<em>add a mod file</em></p><br/>

<p>By chosing a file - the file is <i>copied</i> to the project directory and is NOW available.</p>
<br/><p align="center">
<img src="pics/ModCodeGen2.png" width="315" height="372" /><br/>
<em>build mod in vedi</em></p><br/>

<p>Selecting "build vectrex mod" opens the mod - dialog:  (which is explained in "Mod-Conversion")</p>
<br/><p align="center">
<img src="pics/ModCodeGen4.png" width="761" height="491" /><br/>
<em>build mod in vedi</em></p><br/>

<p>Exiting the above dialog with "create source" will (...hm...) create sources in the current project directory. <br />
(The name of the generated sources are derived from the chosen mod file. In the following it is assumed that the name given is <tt>"music.mod"</tt>.) <br />
The generated sources are accompanied by an example player program. </p>

<p>Following sources are generated:
<ul><li>
<p><tt>modPlayer.i</tt><br />
the subroutines which do the actual playing of vectrex "mods"</p>
</li><li>
<p><tt>VECTREX.I</tt> <br />
which is needed by the player</p>
</li><li>
<p><tt>music.asm</tt><br />
a file with the actual mod data </p>
</li><li>
<p><tt>musicMain.asm</tt><br />
a "main" file, with an example vectrex runnable "cartridge" file</p>
</li></ul>
</p>

<p>A vectrex playable binary file can be generated by setting the generate musicMain file as the main file in the project.</p>
<br/><p align="center">
<img src="pics/ModCodeGen5.png" width="308" height="433" /><br/>
<em>set example player as main</em></p><br/>

<p>The format and the actual play routines are documented in the source code. <br />
Just a few bullet points...
<ul><li>
<p>the provided player routine is similar to the BIOS routine.</p>
</li><li>
<p>the data that results in the mod conversion is (apart from the SILENCE value) exactly the same as the BIOS vectrex music data and therefor not further explained here</p>
</li><li>
<p>in addition to the "music" data, the new format supports a ADSR and TWANG table for each voice, the given music structure looks the same, but the expected ADSR and TWANG data should be tripple the size - look at the generated mod files as an example</p>
</li><li>
<p>the generated data is "verbose" and uses named constant labels for note representation and silence values - and is therfor quite readable (and thus resembles a tracker data also)</p>
</li><li>
<p>each mod "pattern" is converted to a vectrex "song"</p>
</li><li>
<p>to play a complete mod, one must play all songs (previous patterns) in the order of the original patterns</p>
</li><li>
<p>for that a song table (previous pattern table) is generated, which keeps all songs (and song repetitions) </p>
</li><li>
<p>the order and setting of songs is not done withing the player, but is kept in the example main program within sixteen lines of code (see: <tt> loadmusic </tt> )</p>
</li></ul>
</p>

<p>Playing a mod<br />
Is done exactly (with respecting above mentioned patterns...) like playing a vectrex song. The actual pointer to the current song (pattern) is kept in the (RAM) variable: <tt> plr_geilmusik</tt>. With that variable set to the right place, you call the new <tt> Init_Music_chk_mod </tt> befor your recalibration, and after the recalibration the BIOS <tt> Do_Sound</tt> function.</p>

<p>Done</p>
<br/><p align="center">
<img src="pics/ModCodeGen6.png" width="1053" height="1278" /><br/>
<em>the complete main, including the pattern -&gt; song ordering</em></p><br/>
<br/><p align="center">
<img src="pics/ModCodeGen7.png" width="1055" height="1270" /><br/>
<em>example of a generated data file</em></p><br/>
</body>
</html>
